import{r as t,c as e,h as o}from"./p-69279ce3.js";function n(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var r;const i=n((function(t){t.exports=function(t){var e={};function o(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e,o){function n(t){throw Error(t)}o.r(e);var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e;return(e=[{key:"rotateImage",value:function(t,e){var o=t.width,n=t.height,r=document.createElement("canvas"),i=r.getContext("2d");switch(r.width=o,r.height=n,e){case 2:i.transform(-1,0,0,1,o,0),i.translate(o,0),i.scale(-1,1);break;case 3:i.transform(-1,0,0,-1,o,n),i.translate(o,n),i.rotate(Math.PI);break;case 4:i.transform(1,0,0,-1,0,n),i.translate(0,n),i.scale(1,-1);break;case 5:i.transform(0,1,1,0,0,0),i.rotate(-.5*Math.PI),i.scale(-1,1);break;case 6:i.transform(0,1,-1,0,o,0),i.rotate(-.5*Math.PI),i.translate(-o,0);break;case 7:i.transform(0,-1,-1,0,o,n),i.rotate(-.5*Math.PI),i.translate(-o,n),i.scale(1,-1);break;case 8:i.transform(0,-1,1,0,0,n),i.rotate(.5*Math.PI),i.translate(0,-n)}return i.drawImage(t,0,0,o,n),r.toDataURL("image/".concat("JPEG"),100)}},{key:"b64toBlob",value:function(t){for(var e=atob(t.toString().replace(/^data:image\/(jpeg|jpg);base64,/,"")),o=[],n=0;n<e.length;n+=512){for(var r=e.slice(n,n+512),i=new Array(r.length),a=0;a<r.length;a++)i[a]=r.charCodeAt(a);var p=new Uint8Array(i);o.push(p)}return new Blob(o,{type:"image/jpeg"})}},{key:"getOrientation",value:function(t,e){var o=new FileReader;o.onload=function(t){var o=new DataView(t.target.result);if(65496!=o.getUint16(0,!1))return e(-2);for(var n=o.byteLength,r=2;r<n;){var i=o.getUint16(r,!1);if(r+=2,65505==i){if(1165519206!=o.getUint32(r+=2,!1))return e(-1);var a=18761==o.getUint16(r+=6,!1);r+=o.getUint32(r+4,a);var p=o.getUint16(r,a);r+=2;for(var s=0;s<p;s++)if(274==o.getUint16(r+12*s,a))return e(o.getUint16(r+12*s+8,a))}else{if(65280!=(65280&i))break;r+=o.getUint16(r,!1)}}return e(-1)},o.readAsArrayBuffer(t.slice(0,65536))}},{key:"createRotatedImage",value:function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"base64",r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n,a=null,p=null,s=new FileReader;e?e.type&&!e.type.includes("image")?i("File Is NOT Image"):(s.readAsDataURL(e),s.onload=function(){var n=new Image;n.src=s.result,n.onload=function(){t.getOrientation(e,(function(e){!function(e,n){-2==e?i("Image is NOT JPEG"):-1==e&&i("Image is NOT have a exif code"),p=t.rotateImage(n,e),a=t.b64toBlob(p),r("blob"===o?a:p)}(e,n)}))}},s.onerror=function(t){i(t)}):i("File Not Found!")}},{key:"createRotatedImageAsync",value:function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"base64";return new Promise((function(n,r){t.createRotatedImage(e,o,n,r)}))}}])&&function(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(t,e),t}();e.default={createRotatedImage:function(t,e,o){return r.createRotatedImage(t,e,o)},createRotatedImageAsync:function(t,e){return r.createRotatedImageAsync(t,e)}}}])}(r={path:undefined,exports:{},require:function(){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}}),r.exports));let a=class{constructor(o){t(this,o),this.imageSelected=e(this,"imageSelected",7),this.text="+ Add Photo",this.icon="",this.showPopup=!1}readImage(t){this.showPopup=!1,i.createRotatedImage(t.target.files[0],"base64",(t=>{console.log(t),this.imageSelected.emit(t)}),(t=>{console.warn(t)}))}addImagePopup(){this.showPopup=!0}render(){return console.log(i),o("div",null,o("input",{ref:t=>this.inputElement=t,type:"file",name:"image",accept:"image/*",capture:"environment",onChange:t=>this.readImage(t)}),o("input",{ref:t=>this.inputElement2=t,type:"file",name:"image2",accept:"image/*",onChange:t=>this.readImage(t)}),o("button",{onClick:()=>this.addImagePopup()},this.text?o("div",null,this.text):"",this.icon?o("i",{class:`fas fa-${this.icon}`}):""),this.showPopup?o("div",{class:"popup__overlay"},o("div",{class:"popup"},o("button",{onClick:()=>this.inputElement.click()},"Take photo"),o("button",{onClick:()=>this.inputElement2.click()},"Select photo from device"),o("button",{class:"ghost",onClick:()=>this.showPopup=!1},"Cancel"))):"")}};a.style="app-photo input{display:none}app-photo button{background:#5851ff;color:white;margin:8px;border:none;font-size:13px;font-weight:700;text-transform:uppercase;padding:16px 20px;border-radius:2px;box-shadow:0 8px 16px rgba(0, 0, 0, 0.1), 0 3px 6px rgba(0, 0, 0, 0.08);outline:0;letter-spacing:0.04em;transition:all 0.15s ease;cursor:pointer}app-photo button:hover{box-shadow:0 3px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.1);transform:translateY(1px)}app-photo .popup{position:fixed;width:80%;background-color:white;box-shadow:0px 0px 21px 1px rgb(121, 120, 120);z-index:999;top:50%;transform:translateY(-50%);left:10%;align-items:center;justify-content:center;display:flex;flex-direction:column;padding:1em;box-sizing:border-box}app-photo .popup__overlay{background-color:rgba(0, 0, 0, 0.438);position:fixed;z-index:998;left:0;right:0;top:0;bottom:0}app-photo .popup button{width:100%}app-photo .ghost{background-color:rgb(207, 207, 207) !important;color:black}app-photo i{font-size:26px;margin:0;height:1em;width:1em}";let p=class{constructor(o){t(this,o),this.save=e(this,"save",7),this.text="Name:",this.value="Hallway 1",this.buttonText="",this.buttonIcon="",this.showPopup=!1}render(){return o("div",null,o("button",{onClick:()=>{this.showPopup=!0,setTimeout((()=>{this.inputElement.focus(),setTimeout((()=>{this.inputElement.select()}),200)}),200)}},this.buttonText?o("div",null,this.buttonText):"",this.buttonIcon?o("i",{class:`far fa-${this.buttonIcon}`}):""),this.showPopup?o("div",{class:"popup__overlay"},o("div",{class:"popup"},this.text,o("input",{type:"text",value:this.value,onChange:t=>this.value=t.target.value,ref:t=>this.inputElement=t,onKeyDown:t=>{"Enter"===t.key&&(this.save.emit(t.target.value),this.showPopup=!1)}}),o("button",{onClick:()=>{this.save.emit(this.value),this.showPopup=!1}},"Save"),o("button",{class:"ghost",onClick:()=>this.showPopup=!1},"Cancel"))):"")}};p.style=":host{display:inline-block}app-prompt button{background:#5851ff;color:white;margin:8px;border:none;font-size:13px;font-weight:700;text-transform:uppercase;padding:16px 20px;border-radius:2px;box-shadow:0 8px 16px rgba(0, 0, 0, 0.1), 0 3px 6px rgba(0, 0, 0, 0.08);outline:0;letter-spacing:0.04em;transition:all 0.15s ease;cursor:pointer}app-prompt button:hover{box-shadow:0 3px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.1);transform:translateY(1px)}app-prompt .popup{position:fixed;width:80%;background-color:white;box-shadow:0px 0px 21px 1px rgb(121, 120, 120);z-index:999;top:50%;transform:translateY(-50%);left:10%;align-items:center;justify-content:center;display:flex;flex-direction:column;padding:1em;box-sizing:border-box}app-prompt .popup__overlay{background-color:rgba(0, 0, 0, 0.438);position:fixed;z-index:998;left:0;right:0;top:0;bottom:0}app-prompt .popup button{width:100%}app-prompt .ghost{background-color:rgb(207, 207, 207) !important;color:black}app-prompt input{border:1px solid rgb(88, 88, 88);border-radius:4px;padding:0.8em 0.8em;margin:1em 1em;width:100%;box-sizing:border-box}app-prompt i{font-size:26px;margin:0;height:1em;width:1em}";export{a as app_photo,p as app_prompt}